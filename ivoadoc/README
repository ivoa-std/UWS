This directory contains files to help with the authorship of IVOA documents, which must be primarily be delivered as HTML.

The scripts in this directory are generally expected to be installed as a subdirectory "ivoadoc" of the directory containing the file to be edited (This has been done to allow easy update an coping of this directory using the svn external mechanism).
 The only exception to this is the build.xml ant file which should be copied up to the directory containing the target document.

The scripts allow for features not normally associated with HTML authoring

1. automated section numbering and table of contents generation
2. automated reference handling with bibtex.
3. formatting of included xml files.
4. formatting of schema constructs according to uniform standards
5. final output of IVOA mandated PDF file with associated pdf bookmarks.

Aims
----

1. Author the document in XHTML - allows both text and popular WYSIWYG editors to be used.
2. Allow the document created by one iteration of the processing to be used as input for the next stage - this allows tweaks to be made in a WYSIWIG editor to the final output format
that will be then auto-numbered for instance.


Authoring
---------

1. initially can just do <cite>bibref</cite> 
    <span class="xref">UWSSchema</span>
    
    note that <a> anchors need both an id attribute and a name attribute - it is the id attribute that the xslt keys off.


2. Auto generated schema documentation

<div><?schemadef href="../UWSRegExt.xsd" defn="UWSInterface" ?></div>

where the href is url to the source and defn is the name of the schema (complex or simple) type to document.

3. Inclusion and formating of xml

<div><?incxml href="../UWSJobInstance.xml" ?></div>


3. Autogeneration of TOC

<div><?toc?></div>

will cause the generation of a table of contents and a renumbering of sections which should have the form

<div class="section"><h2><a name="Introduction" id="Introduction" shape="rect"/><span class="secnum">1. </span>Introduction (informative)</h2>

.... </div>

if you want auto-generation of section number/anchor then you can start with 

<div class="section"><h2>blah</h2>

Requirements
------------

The xslt transformation scripts require an xslt 2.0 aware processor with evaluation extension - basically this means saxon B 9.1 http://saxon.sourceforge.net/

The PDF creation uses Apache FOP

Ant build file - this requires that the saxon xslt processor is available to ant - an easy way to do this is to place the saxon jar 
in ~/.ant/lib/

An example ant build file is included in this directory - it is intended that 


File List
---------

README - this file
XMLPrint.css - css for the xml pretty printing
build.xml - example ant build file for running the processing
extractcite.xslt - XSL for extracting citations from document
ivoa-extras.css
ivoa-fo.xsl - XSL-FO for formatting PDF
ivoarestructure.xslt - main XSL that does the toc, numbering xml pretty printing etc.
plainhtml.bst - 
refs.bib - standard set of references of IVOA documents
structure.py - small script to add div sectioning to a plain html file
template.html - template IVOA document illustrating various capabilities of the system.
vor2spec.xsl - transform IVOA schema into standardized description.
xhtml2fo.xsl - transform the document to XSL-FO
xmlcatalog - directory containing various entity files so that they do not have to be downloaded from W3C site.



Acknowledgements
---------------

The scripts and ideas for this are derived from originals by Norman Gray, and efforts have been made to preserve his conventions. The major 
difference being that the formatting script may be used iteratively, rather than the final output being a 'one-shot' batch processed result of the input, that cannot again be used as input.

The parts for schema documentation are from Ray Plante's xsl transformations.


Paul Harrison paul.harrison@manchester.ac.uk 2009